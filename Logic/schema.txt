Vars:

Clock
Lock
Btn
=3
!=2
D_In
D_Out

--

D_In:
Enable:
(Lock and (not Clock) and !=2) or ((not Lock) and Btn)

Data:
(Lock and =3) or ((not Lock) and (not D_Out))

---

D_Out:
Enable:
(Lock and Clock) or (not Lock and (not Btn))

Data:
D_In

---

LED:
Pwr: D_Out

